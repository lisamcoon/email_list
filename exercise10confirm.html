<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Join Our Email List</title>
    <link rel="stylesheet" href="ex-10-styles.css" />

    <script>
      var decode = function (text) {
        text = text.replace(/\+/g, " ");
        text = text.replace(/%[a-fA-F0-9]{2}/g, function (text) {
          return String.fromCharCode("0x" + text.substr(1, 2));
        });
        return text;
      };

      var display_data = function () {
        var url_parts = window.location.toString().split("?");
        var blankMessage = "No data was submitted";
        if (url_parts.length != 2) return;

        var fields = url_parts[1].split("&");
        var field_parts;
        for (let i = 0; i < 5; i++) {
          field_parts = fields[i].split("=");
          field_parts[0] = decode(field_parts[0]);
          field_parts[1] = decode(field_parts[1]);
          document.write("<dt>" + field_parts[0] + "</dt>");
          if (field_parts[1].length != 0) {
            document.write("<dd>" + field_parts[1] + "</dd>");
          } else {
            document.write("<dm>" + blankMessage + "</dm>");
          }

          document.write("</dl>");
        }
      };
    </script>
  </head>

  <body>
    <section id="content">
      <h1>Thanks for joining!</h1>
      <h4>Your registration has been submitted with the following data:</h4>

      <script type="text/javascript">
        display_data();
      </script>
    </section>
  </body>
</html>
